{"numFailedTestSuites":1,"numFailedTests":7,"numPassedTestSuites":1,"numPassedTests":21,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":2,"numTotalTests":28,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1772014448989,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["AdminRepository","findByUsername"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository findByUsername should return admin by username (lowercased and trimmed)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1772014451281,"status":"passed","title":"should return admin by username (lowercased and trimmed)"},{"ancestorTitles":["AdminRepository","findByUsername"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository findByUsername should return null when admin not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451288,"status":"passed","title":"should return null when admin not found"},{"ancestorTitles":["AdminRepository","findById"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository findById should return active admin by id","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1772014451289,"status":"passed","title":"should return active admin by id"},{"ancestorTitles":["AdminRepository","findById"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository findById should return null for inactive admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451290,"status":"passed","title":"should return null for inactive admin"},{"ancestorTitles":["AdminRepository","create"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository create should create admin with lowercased username","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1772014451291,"status":"passed","title":"should create admin with lowercased username"},{"ancestorTitles":["AdminRepository","create"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository create should default role to operator","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451292,"status":"passed","title":"should default role to operator"},{"ancestorTitles":["AdminRepository","updateLastLogin"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository updateLastLogin should update lastLoginAt to current time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451293,"status":"passed","title":"should update lastLoginAt to current time"},{"ancestorTitles":["AdminRepository","updateLastLogin"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository updateLastLogin should return void","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451297,"status":"passed","title":"should return void"},{"ancestorTitles":["AdminRepository","updatePassword"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository updatePassword should update passwordHash","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451299,"status":"passed","title":"should update passwordHash"},{"ancestorTitles":["AdminRepository","updatePassword"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository updatePassword should return void","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451300,"status":"passed","title":"should return void"},{"ancestorTitles":["AdminRepository","existsByUsername"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository existsByUsername should return true when username exists","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1772014451302,"status":"passed","title":"should return true when username exists"},{"ancestorTitles":["AdminRepository","existsByUsername"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository existsByUsername should return false when username does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451302,"status":"passed","title":"should return false when username does not exist"},{"ancestorTitles":["AdminRepository","existsByUsername"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminRepository existsByUsername should lowercase and trim username","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451303,"status":"passed","title":"should lowercase and trim username"}],"endTime":1772014451308,"message":"","name":"C:\\Users\\nakam\\Developers\\exodia-core\\src\\repositories\\admin\\__tests__\\admin.repository.spec.ts","startTime":1772014449791,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AdminAuthService","login"],"duration":7,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set property compare of #<Object> which has only a getter\n    at Object.<anonymous> (C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts:42:36)\n    at Promise.finally.completed (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AdminAuthService login should return accessToken and admin info on successful login","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1772014451305,"status":"failed","title":"should return accessToken and admin info on successful login"},{"ancestorTitles":["AdminAuthService","login"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService login should throw UnauthorizedException when username not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451326,"status":"passed","title":"should throw UnauthorizedException when username not found"},{"ancestorTitles":["AdminAuthService","login"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService login should throw UnauthorizedException when admin is inactive","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451332,"status":"passed","title":"should throw UnauthorizedException when admin is inactive"},{"ancestorTitles":["AdminAuthService","login"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set property compare of #<Object> which has only a getter\n    at Object.<anonymous> (C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts:85:36)\n    at Promise.finally.completed (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AdminAuthService login should throw UnauthorizedException when password is wrong","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1772014451334,"status":"failed","title":"should throw UnauthorizedException when password is wrong"},{"ancestorTitles":["AdminAuthService","login"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set property compare of #<Object> which has only a getter\n    at Object.<anonymous> (C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts:103:36)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"AdminAuthService login should not reveal whether username or password is wrong","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451339,"status":"failed","title":"should not reveal whether username or password is wrong"},{"ancestorTitles":["AdminAuthService","validateToken"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService validateToken should return admin info for valid token payload","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1772014451341,"status":"passed","title":"should return admin info for valid token payload"},{"ancestorTitles":["AdminAuthService","validateToken"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService validateToken should return null for non-admin token type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451343,"status":"passed","title":"should return null for non-admin token type"},{"ancestorTitles":["AdminAuthService","validateToken"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService validateToken should return null when admin not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451344,"status":"passed","title":"should return null when admin not found"},{"ancestorTitles":["AdminAuthService","validateToken"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService validateToken should return null when admin is inactive","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451345,"status":"passed","title":"should return null when admin is inactive"},{"ancestorTitles":["AdminAuthService","createAdmin"],"duration":2,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set property hash of #<Object> which has only a getter\n    at Object.<anonymous> (C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts:173:33)\n    at Promise.finally.completed (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AdminAuthService createAdmin should create a new admin with hashed password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1772014451347,"status":"failed","title":"should create a new admin with hashed password"},{"ancestorTitles":["AdminAuthService","createAdmin"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set property hash of #<Object> which has only a getter\n    at Object.<anonymous> (C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts:195:33)\n    at Promise.finally.completed (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AdminAuthService createAdmin should create admin with specified role","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1772014451350,"status":"failed","title":"should create admin with specified role"},{"ancestorTitles":["AdminAuthService","createAdmin"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService createAdmin should throw ConflictException when username already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451352,"status":"passed","title":"should throw ConflictException when username already exists"},{"ancestorTitles":["AdminAuthService","changePassword"],"duration":2,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set property compare of #<Object> which has only a getter\n    at Object.<anonymous> (C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts:230:36)\n    at Promise.finally.completed (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AdminAuthService changePassword should change password when current password is correct","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1772014451354,"status":"failed","title":"should change password when current password is correct"},{"ancestorTitles":["AdminAuthService","changePassword"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthService changePassword should throw UnauthorizedException when admin not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1772014451356,"status":"passed","title":"should throw UnauthorizedException when admin not found"},{"ancestorTitles":["AdminAuthService","changePassword"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set property compare of #<Object> which has only a getter\n    at Object.<anonymous> (C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts:259:36)\n    at Promise.finally.completed (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\nakam\\Developers\\exodia-core\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AdminAuthService changePassword should throw UnauthorizedException when current password is wrong","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1772014451358,"status":"failed","title":"should throw UnauthorizedException when current password is wrong"}],"endTime":1772014451411,"message":"  ΓùÅ AdminAuthService ΓÇ║ login ΓÇ║ should return accessToken and admin info on successful login\n\n    TypeError: Cannot set property compare of #<Object> which has only a getter\n\n    \u001b[0m \u001b[90m 40 |\u001b[39m     it(\u001b[32m'should return accessToken and admin info on successful login'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 41 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mfindByUsername \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(mockAdmin)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 42 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mcompare \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 43 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mupdateLastLogin \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 44 |\u001b[39m\n     \u001b[90m 45 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mlogin(\u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'correct-password'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/modules/admin/__tests__/admin-auth.service.spec.ts:42:36)\n\n  ΓùÅ AdminAuthService ΓÇ║ login ΓÇ║ should throw UnauthorizedException when password is wrong\n\n    TypeError: Cannot set property compare of #<Object> which has only a getter\n\n    \u001b[0m \u001b[90m 83 |\u001b[39m     it(\u001b[32m'should throw UnauthorizedException when password is wrong'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 84 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mfindByUsername \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(mockAdmin)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 85 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mcompare \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 86 |\u001b[39m\n     \u001b[90m 87 |\u001b[39m       \u001b[36mawait\u001b[39m expect(service\u001b[33m.\u001b[39mlogin(\u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'wrong-password'\u001b[39m))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\n     \u001b[90m 88 |\u001b[39m         \u001b[33mUnauthorizedException\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/modules/admin/__tests__/admin-auth.service.spec.ts:85:36)\n\n  ΓùÅ AdminAuthService ΓÇ║ login ΓÇ║ should not reveal whether username or password is wrong\n\n    TypeError: Cannot set property compare of #<Object> which has only a getter\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m       \u001b[90m// Password wrong\u001b[39m\n     \u001b[90m 102 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mfindByUsername \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(mockAdmin)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mcompare \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m       \u001b[36mtry\u001b[39m {\n     \u001b[90m 105 |\u001b[39m         \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mlogin(\u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'wrong'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m       } \u001b[36mcatch\u001b[39m (e\u001b[33m:\u001b[39m any) {\u001b[0m\n\n      at Object.<anonymous> (src/modules/admin/__tests__/admin-auth.service.spec.ts:103:36)\n\n  ΓùÅ AdminAuthService ΓÇ║ createAdmin ΓÇ║ should create a new admin with hashed password\n\n    TypeError: Cannot set property hash of #<Object> which has only a getter\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m     it(\u001b[32m'should create a new admin with hashed password'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 172 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mexistsByUsername \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mhash \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m         \u001b[33m.\u001b[39mfn()\n     \u001b[90m 175 |\u001b[39m         \u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'$2a$12$newhashedpassword'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mcreate \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.<anonymous> (src/modules/admin/__tests__/admin-auth.service.spec.ts:173:33)\n\n  ΓùÅ AdminAuthService ΓÇ║ createAdmin ΓÇ║ should create admin with specified role\n\n    TypeError: Cannot set property hash of #<Object> which has only a getter\n\n    \u001b[0m \u001b[90m 193 |\u001b[39m     it(\u001b[32m'should create admin with specified role'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 194 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mexistsByUsername \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 195 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mhash \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'hash'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 196 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mcreate \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 197 |\u001b[39m         username\u001b[33m:\u001b[39m \u001b[32m'support1'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 198 |\u001b[39m         role\u001b[33m:\u001b[39m \u001b[32m'support'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/modules/admin/__tests__/admin-auth.service.spec.ts:195:33)\n\n  ΓùÅ AdminAuthService ΓÇ║ changePassword ΓÇ║ should change password when current password is correct\n\n    TypeError: Cannot set property compare of #<Object> which has only a getter\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m     it(\u001b[32m'should change password when current password is correct'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 229 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mfindById \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(mockAdmin)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mcompare \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mhash \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\n     \u001b[90m 232 |\u001b[39m         \u001b[33m.\u001b[39mfn()\n     \u001b[90m 233 |\u001b[39m         \u001b[33m.\u001b[39mmockResolvedValue(\u001b[32m'$2a$12$newhash'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/modules/admin/__tests__/admin-auth.service.spec.ts:230:36)\n\n  ΓùÅ AdminAuthService ΓÇ║ changePassword ΓÇ║ should throw UnauthorizedException when current password is wrong\n\n    TypeError: Cannot set property compare of #<Object> which has only a getter\n\n    \u001b[0m \u001b[90m 257 |\u001b[39m     it(\u001b[32m'should throw UnauthorizedException when current password is wrong'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 258 |\u001b[39m       adminRepo\u001b[33m.\u001b[39mfindById \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(mockAdmin)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 259 |\u001b[39m       (bcrypt\u001b[33m.\u001b[39mcompare \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n     \u001b[90m 261 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\n     \u001b[90m 262 |\u001b[39m         service\u001b[33m.\u001b[39mchangePassword(\u001b[32m'admin-123'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'wrong-pass'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'new-pass'\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/modules/admin/__tests__/admin-auth.service.spec.ts:259:36)\n","name":"C:\\Users\\nakam\\Developers\\exodia-core\\src\\modules\\admin\\__tests__\\admin-auth.service.spec.ts","startTime":1772014449791,"status":"failed","summary":""}],"wasInterrupted":false}
